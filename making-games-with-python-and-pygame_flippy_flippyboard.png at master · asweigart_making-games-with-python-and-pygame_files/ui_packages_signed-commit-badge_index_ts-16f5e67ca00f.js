"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_signed-commit-badge_index_ts"],{91495:(e,i,s)=>{s.d(i,{G:()=>y});var t=s(85893),r=s(63309),n=s(73290),a=s(42483),o=s(66280),d=s(98833),c=s(97011),l=s(53729);function h({reason:e,isViewer:i,hasSignature:s,verificationStatus:r,signatureType:a,signedByGitHub:o,keyExpired:d,keyRevoked:h}){if("unverified"===r){if(s&&"GPGVERIFY_UNAVAILABLE"===e)return(0,t.jsx)(c.Z,{children:"The commit signature verification service is not available"});if(!s)return(0,t.jsx)(c.Z,{children:"This commit is not signed, but one or more authors requires that any commit attributed to them is signed."});switch(e){case"INVALID":return(0,t.jsx)(c.Z,{children:"The signature in this commit could not be verified. Someone may be trying to trick you."});case"MALFORMED_SIG":return(0,t.jsx)(c.Z,{children:"We were unable to parse the signature in this commit."});case"UNKNOWN_KEY":if(i)return(0,t.jsxs)(c.Z,{children:[(0,t.jsxs)(n.Z,{href:"/settings/keys",children:["Upload your public signing ","SshSignature"===a?"SSH":"GPG"," key"]})," to verify your signature."]});return(0,t.jsx)(c.Z,{children:"This user has not yet uploaded their public signing key."});case"BAD_EMAIL":return(0,t.jsx)(c.Z,{children:"The email in this signature doesn\u2019t match the committer email."});case"UNVERIFIED_EMAIL":if(i)return(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(n.Z,{href:"/settings/emails",children:"Verify your email address"})," to verify your signature."]});return(0,t.jsx)(c.Z,{children:"The committer email address is not verified."});case"NO_USER":return(0,t.jsx)(c.Z,{children:"No user is associated with the committer email."});case"UNKNOWN_SIG_TYPE":return(0,t.jsx)(c.Z,{children:"GitHub supports GPG and S/MIME signatures. We don't know what type of signature this is."});case"GPGVERIFY_ERROR":return(0,t.jsx)(c.Z,{children:"We had a problem verifying this signature. Please try again later."});case"NOT_SIGNING_KEY":return(0,t.jsx)(c.Z,{children:"The key that signed this doesn't have usage flags that allow signing."});case"EXPIRED_KEY":return(0,t.jsx)(c.Z,{children:"The key that signed this is expired."});case"OCSP_ERROR":return(0,t.jsx)(c.Z,{children:"We had a problem checking for revoked certificates. Please try again later."});case"OCSP_REVOKED":return(0,t.jsx)(c.Z,{children:"One or more certificates in the chain has been revoked."});case"BAD_CERT":return(0,t.jsx)(c.Z,{children:"The signing certificate or its chain could not be verified."});case"GPGVERIFY_UNAVAILABLE":case"UNSIGNED":return(0,t.jsx)(c.Z,{children:"We were unable to verify this signature."})}}else if("partially_verified"===r)return o?(0,l.ko)()?(0,t.jsxs)(c.Z,{children:["This commit was created on GitHub Enterprise Server and signed with a"," ",(0,t.jsx)(c.Z,{sx:{fontWeight:"bold"},children:"verified signature"})]}):(0,t.jsxs)(c.Z,{children:["This commit was created on GitHub.com and signed with GitHub's"," ",(0,t.jsx)(c.Z,{sx:{fontWeight:"bold"},children:"verified signature"})]}):(0,t.jsxs)(c.Z,{children:["This commit was signed with the committer's ",(0,t.jsx)(c.Z,{sx:{fontWeight:"bold"},children:"verified signature"}),".",d?(0,t.jsxs)(c.Z,{children:[" The key expired ",h&&(0,t.jsx)(c.Z,{children:"and was revoked "}),"after the commit was signed."]}):h?(0,t.jsx)(c.Z,{children:" The key was revoked after the commit was signed."}):(0,t.jsx)(t.Fragment,{})]});else if("verified"===r)switch(e){case"VALID":if(!o)return(0,t.jsxs)(c.Z,{children:["This commit was signed with the committer's ",(0,t.jsx)(c.Z,{sx:{fontWeight:"bold"},children:"verified signature"}),d?(0,t.jsxs)(c.Z,{children:[" The key expired ",h&&(0,t.jsx)(c.Z,{children:"and was revoked "}),"after the commit was signed."]}):h?(0,t.jsx)(c.Z,{children:" The key was revoked after the commit was signed."}):(0,t.jsx)(t.Fragment,{})]});if((0,l.ko)())return(0,t.jsxs)(c.Z,{children:["This commit was created on GitHub Enterprise Server and signed with a"," ",(0,t.jsx)(c.Z,{sx:{fontWeight:"bold"},children:"verified signature"})]});return(0,t.jsxs)(c.Z,{children:["This commit was created on GitHub.com and signed with GitHub's"," ",(0,t.jsx)(c.Z,{sx:{fontWeight:"bold"},children:"verified signature"})]});case"OCSP_PENDING":return(0,t.jsx)(c.Z,{children:"This commit was signed with a verified signature, though we're still working on certificate revocation checking."})}return(0,t.jsx)(c.Z,{})}try{h.displayName||(h.displayName="ReasonLabel")}catch{}function x({icon:e,iconColor:i,reason:s,isViewer:r,hasSignature:n,verificationStatus:o,signatureType:c,signedByGitHub:l,keyExpired:x,keyRevoked:g}){return(0,t.jsxs)(a.Z,{sx:{display:"flex",p:2},"data-testid":"signed-commit-header",children:[(0,t.jsx)(a.Z,{sx:{pr:2},children:(0,t.jsx)(d.Z,{icon:e,sx:{color:i}})}),(0,t.jsx)(a.Z,{sx:{fontSize:1,flexGrow:1},children:(0,t.jsx)(h,{reason:s,isViewer:r,hasSignature:n,verificationStatus:o,signatureType:c,signedByGitHub:l,keyExpired:x,keyRevoked:g})})]})}try{x.displayName||(x.displayName="SignedCommitHeader")}catch{}var g=s(85529),u=s(57294);function m({keyHex:e,signatureType:i,signer:s,showPartiallyVerifiedMessage:o,signingLinkComponent:l,keyExpired:h,keyRevoked:x}){return(0,t.jsx)(a.Z,{sx:{display:"flex"},"data-testid":"signed-commit-footer",children:(0,t.jsx)(a.Z,{sx:{fontSize:0,flexGrow:1,maxWidth:"100%"},children:o&&s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{sx:{py:3},children:(0,t.jsxs)(a.Z,{sx:{display:"flex"},children:[(0,t.jsx)(u.O,{src:s.avatar_url,size:20,sx:{mr:2,ml:3}}),(0,t.jsxs)(a.Z,{sx:{flex:1},children:[(0,t.jsx)(n.Z,{href:`/${s.login}`,sx:{fontSize:0,color:"fg.default",fontWeight:"bold"},children:s.login}),(0,t.jsxs)(c.Z,{children:["'s contribution has been verified via ","SshSignature"===i?"SSH":"GPG"," key."]})]})]})}),(0,t.jsxs)(a.Z,{sx:{backgroundColor:"attention.subtle",display:"flex",p:3},children:[(0,t.jsx)(d.Z,{icon:g.InfoIcon,sx:{mr:2}}),"We cannot verify signatures from co-authors, and some of the co-authors attributed to this commit require their commits to be signed."]})]}):(0,t.jsxs)(t.Fragment,{children:[s?(0,t.jsx)(a.Z,{sx:{px:3,pt:3},children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.O,{src:s.avatar_url,size:20,sx:{mr:2}}),(0,t.jsx)(n.Z,{href:`/${s.login}`,sx:{fontSize:1,color:"fg.default",fontWeight:"bold"},children:s.login})]})}):(0,t.jsx)(t.Fragment,{}),(0,t.jsxs)(a.Z,{sx:{p:3,flexDirection:"column"},children:[e&&(0,t.jsxs)(a.Z,{children:["SshSignature"===i?"SSH Key Fingerprint:":"GPG Key ID:"," ",(0,t.jsx)(c.Z,{sx:{color:"fg.muted"},children:e})]}),e&&(h||x)&&(0,t.jsxs)(a.Z,{sx:{py:1},children:[h&&(0,t.jsx)(r.Z,{sx:{mr:1},variant:"accent",children:"Expired"}),x&&(0,t.jsx)(r.Z,{variant:"attention",children:"Revoked"})]}),l]})]})})})}try{m.displayName||(m.displayName="SignedCommitFooter")}catch{}function f({subject:e,issuer:i,signingLinkComponent:s}){let r,n;return e.organization&&e.organization_unit?r="O/OU":e.organization?r="O":e.organization_unit&&(r="OU"),i.organization&&i.organization_unit?n="O/OU":i.organization?n="O":i.organization_unit&&(n="OU"),(0,t.jsx)(a.Z,{sx:{display:"flex"},"data-testid":"smime-commit-footer",children:(0,t.jsxs)(a.Z,{sx:{fontSize:0,p:3},children:[(0,t.jsx)(c.Z,{sx:{fontWeight:"bold",fontSize:1},children:"Certificate subject"}),(0,t.jsxs)(a.Z,{as:"table",sx:{mb:1},children:[e.common_name&&(0,t.jsxs)(a.Z,{as:"tr",children:[(0,t.jsx)(a.Z,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"CN"}),(0,t.jsx)(a.Z,{as:"td",sx:{width:"44px",paddingRight:"12px"},children:e.common_name})]}),e.email_address&&(0,t.jsxs)(a.Z,{as:"tr",children:[(0,t.jsx)(a.Z,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"emailAddress"}),(0,t.jsx)(a.Z,{as:"td",sx:{width:"44px",paddingRight:"12px"},children:e.email_address})]}),r&&(0,t.jsxs)(a.Z,{as:"tr",children:[(0,t.jsx)(a.Z,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:r}),(0,t.jsxs)(a.Z,{as:"td",children:[e.organization,"O/OU"===r&&"/",e.organization_unit]})]})]}),(0,t.jsx)(c.Z,{sx:{fontWeight:"bold",fontSize:1},children:"Certificate issuer"}),(0,t.jsxs)(a.Z,{as:"table",sx:{mb:1},children:[i.common_name&&(0,t.jsxs)(a.Z,{as:"tr",children:[(0,t.jsx)(a.Z,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:"CN"}),(0,t.jsx)(a.Z,{as:"td",children:i.common_name})]}),n&&(0,t.jsxs)(a.Z,{as:"tr",children:[(0,t.jsx)(a.Z,{as:"td",sx:{width:"44px",paddingRight:"12px",color:"fg.muted"},children:n}),(0,t.jsxs)(a.Z,{as:"td",children:[i.organization,"O/OU"===n&&"/",i.organization_unit]})]})]}),s]})})}try{f.displayName||(f.displayName="SmimeCommitFooter")}catch{}function j(e){var i;let s;let{hasSignature:r,isOpen:d,onDismiss:c,signature:h,verificationStatus:u}=e,{footerLabel:j,footerUrl:p}=(i=h.helpUrl,(0,l.q1)()?{footerLabel:"Learn about signing commits",footerUrl:`${i}/articles/signing-commits-using-gpg/`}:{footerLabel:"Learn about vigilant mode",footerUrl:`${i}/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits`}),y=h.signatureVerificationReason.toUpperCase(),Z=h.signedByGitHub,{icon:b,icon_color:v}="unverified"===u?{icon:g.UnverifiedIcon,icon_color:"fg.muted"}:{icon:g.VerifiedIcon,icon_color:"success.fg"};"unverified"===u||Z||(s={avatar_url:h.signerAvatarUrl,login:h.signerLogin});let k=(0,t.jsx)(n.Z,{href:p,"data-testid":"signature-link",children:j});return d?(0,t.jsx)(o.V,{onClose:c,sx:{overflowY:"auto",backgroundColor:"canvas.default",boxShadow:"none"},title:u,width:"small",renderHeader:()=>(0,t.jsxs)(a.Z,{"data-testid":"signed-commit-dialog",sx:{display:"flex",gap:2,alignItems:"flex-start",p:2,backgroundColor:"canvas.subtle",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.subtle"},children:[(0,t.jsx)(x,{reason:y,icon:b,iconColor:v,verificationStatus:u,isViewer:h.isViewer,hasSignature:r,signatureType:h.signatureType,signedByGitHub:Z,keyExpired:h.keyExpired,keyRevoked:h.keyRevoked}),(0,t.jsx)(o.V.CloseButton,{onClose:c})]}),renderBody:()=>(0,t.jsx)(o.V.Body,{sx:{padding:0},children:"GpgSignature"===h.signatureType||"SshSignature"===h.signatureType?(0,t.jsx)(m,{keyHex:h.keyId,signatureType:h.signatureType,signer:s,showPartiallyVerifiedMessage:"partially_verified"===u,signingLinkComponent:k,keyExpired:h.keyExpired,keyRevoked:h.keyRevoked}):"SmimeSignature"===h.signatureType&&h.signatureCertificateSubject&&h.signatureCertificateIssuer?(0,t.jsx)(f,{issuer:h.signatureCertificateIssuer,subject:h.signatureCertificateSubject,signingLinkComponent:k}):(0,t.jsx)(a.Z,{sx:{display:"flex"},children:(0,t.jsx)(a.Z,{sx:{fontSize:0,p:3},children:k})})})}):null}try{j.displayName||(j.displayName="SignedCommitDialog")}catch{}var p=s(67294);function y({hasSignature:e,verificationStatus:i,signature:s,badgeSize:n="small"}){let[a,o]=(0,p.useState)(!1),d=(0,p.useRef)(null);if("unsigned"===i)return(0,t.jsx)(t.Fragment,{});let c={onClick:()=>o(!0),ref:d},l={sx:{cursor:"pointer"},size:n},h="verified"===i?(0,t.jsx)(r.Z,{as:"button",variant:"success",...l,...c,children:"Verified"}):"unverified"===i?(0,t.jsx)(r.Z,{as:"button",variant:"attention",...l,...c,children:"Unverified"}):"partially_verified"===i?(0,t.jsx)(r.Z,{as:"button",variant:"success",...l,...c,children:"Partially verified"}):(0,t.jsx)(t.Fragment,{});return(0,t.jsxs)(t.Fragment,{children:[h,a&&(0,t.jsx)(j,{isOpen:a,onDismiss:()=>{o(!1),setTimeout(()=>{d.current?.focus()},0)},verificationStatus:i,signature:s,hasSignature:e})]})}try{y.displayName||(y.displayName="SignedCommitBadge")}catch{}}}]);
//# sourceMappingURL=ui_packages_signed-commit-badge_index_ts-505bc42bdcfc.js.map